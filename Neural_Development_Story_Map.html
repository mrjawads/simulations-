<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. Jawad Simulation Brain Development</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* LEFT SIDEBAR */
        .left-sidebar {
            width: 280px;
            min-width: 280px;
            background: linear-gradient(180deg, #1e1e3f 0%, #2d2d5a 100%);
            padding: 15px;
            display: flex;
            flex-direction: column;
            border-right: 2px solid #4a4a8a;
            overflow-y: auto;
        }

        .sidebar-header {
            text-align: center;
            padding: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .sidebar-header h2 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .sidebar-header .count {
            font-size: 24px;
            font-weight: bold;
            margin-top: 5px;
        }

        .scenario-list {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .scenario-card {
            background: linear-gradient(135deg, #2a2a4a 0%, #3a3a6a 100%);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .scenario-card:hover {
            transform: translateX(5px);
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .scenario-card.selected {
            border-color: #00d4ff;
            background: linear-gradient(135deg, #1a4a6e 0%, #2a5a7e 100%);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.4);
        }

        .scenario-card.completed {
            border-color: #4caf50;
        }

        .scenario-card.completed::after {
            content: '‚úì';
            margin-left: auto;
            color: #4caf50;
            font-size: 18px;
            font-weight: bold;
        }

        .scenario-emoji {
            font-size: 28px;
        }

        .scenario-name {
            font-size: 13px;
            font-weight: 500;
        }

        .divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, #667eea, transparent);
            margin: 15px 0;
        }

        .reading-level-section h3 {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            color: #a0a0c0;
        }

        .reading-level-tabs {
            display: flex;
            gap: 5px;
        }

        .level-tab {
            flex: 1;
            padding: 10px 5px;
            background: #2a2a4a;
            border: none;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .level-tab:hover {
            background: #3a3a6a;
        }

        .level-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .key-words-section {
            margin-top: 15px;
        }

        .key-words-section h3 {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            color: #a0a0c0;
        }

        .key-word {
            display: inline-block;
            background: linear-gradient(135deg, #4a4a8a 0%, #5a5a9a 100%);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            margin: 3px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }

        .btn-reset, .btn-new {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .btn-reset {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: #fff;
        }

        .btn-new {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: #fff;
        }

        .btn-reset:hover, .btn-new:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* CENTER PANEL */
        .center-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }

        .step-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .step-tab {
            flex: 1;
            padding: 15px 10px;
            background: #2a2a4a;
            border-radius: 10px;
            text-align: center;
            font-size: 13px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .step-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.5);
            animation: glow 2s ease-in-out infinite;
        }

        .step-tab.completed {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: #fff;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.5); }
            50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.8); }
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .content-card {
            width: 100%;
            max-width: 700px;
            background: linear-gradient(135deg, #2a2a4a 0%, #3a3a6a 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            display: none;
        }

        .content-card.visible {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
        }

        .welcome-screen h1 {
            font-size: 28px;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-screen p {
            color: #a0a0c0;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .mission-badge {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            padding: 15px 25px;
            border-radius: 30px;
            display: inline-block;
            font-weight: 600;
            margin-top: 10px;
            box-shadow: 0 4px 20px rgba(243, 156, 18, 0.4);
        }

        /* Predict Screen */
        .predict-content h2 {
            font-size: 22px;
            margin-bottom: 20px;
            text-align: center;
        }

        .predict-question {
            background: linear-gradient(135deg, #1e3a5f 0%, #2a4a6f 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #f39c12;
        }

        .predict-question p {
            font-size: 18px;
            line-height: 1.6;
        }

        .predict-options {
            display: grid;
            gap: 10px;
        }

        .predict-option {
            background: linear-gradient(135deg, #3a3a6a 0%, #4a4a8a 100%);
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .predict-option:hover {
            border-color: #667eea;
            transform: translateX(10px);
        }

        .predict-option.selected {
            border-color: #00d4ff;
            background: linear-gradient(135deg, #1a4a6e 0%, #2a5a7e 100%);
        }

        /* Read Screen */
        .read-content h2 {
            font-size: 22px;
            margin-bottom: 20px;
            text-align: center;
        }

        .reading-card {
            background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
            color: #333;
            padding: 25px;
            border-radius: 15px;
            line-height: 1.8;
            font-size: 16px;
            max-height: 300px;
            overflow-y: auto;
        }

        .reading-card .highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        .read-aloud-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: #fff;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .read-aloud-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 20px rgba(155, 89, 182, 0.4);
        }

        /* Watch Screen */
        .watch-content {
            text-align: center;
        }

        .watch-content h2 {
            font-size: 22px;
            margin-bottom: 20px;
        }

        .brain-visual {
            position: relative;
            width: 100%;
            height: 280px;
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a3a 100%);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .brain-outline {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 160px;
            border: 3px solid #4a4a8a;
            border-radius: 50% 50% 45% 45%;
            opacity: 0.5;
        }

        .neural-pathway {
            position: absolute;
            top: 50%;
            left: 30%;
            width: 10%;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f39c12);
            border-radius: 4px;
            transform: translateY(-50%);
            transition: all 1.5s ease;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
            opacity: 0.3;
        }

        .neural-pathway.growing {
            width: 50%;
            height: 16px;
            opacity: 1;
            box-shadow: 0 0 40px rgba(102, 126, 234, 0.8), 0 0 60px rgba(243, 156, 18, 0.5);
        }

        .pathway-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #f39c12;
            border-radius: 50%;
            animation: particleFloat 2s ease-in-out infinite;
        }

        @keyframes particleFloat {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.8; }
            50% { transform: translateY(-20px) scale(1.5); opacity: 1; }
        }

        .pathway-meter {
            margin-top: 20px;
        }

        .meter-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            font-weight: 600;
        }

        .meter-bar {
            height: 25px;
            background: #2a2a4a;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .meter-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c 0%, #f39c12 50%, #27ae60 100%);
            border-radius: 15px;
            transition: width 2s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            font-weight: bold;
            font-size: 12px;
        }

        /* Record Screen */
        .record-content {
            text-align: center;
        }

        .record-content h2 {
            font-size: 22px;
            margin-bottom: 15px;
        }

        .completion-badge {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            padding: 20px 40px;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 20px;
            box-shadow: 0 4px 30px rgba(39, 174, 96, 0.4);
            animation: bounceIn 0.5s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .completion-badge span {
            font-size: 40px;
        }

        .record-summary {
            background: linear-gradient(135deg, #1e3a5f 0%, #2a4a6f 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: left;
        }

        .record-summary p {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .record-summary strong {
            color: #00d4ff;
        }

        /* Action Button */
        .action-btn-container {
            margin-top: 20px;
            text-align: center;
        }

        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* RIGHT SIDEBAR */
        .right-sidebar {
            width: 280px;
            min-width: 280px;
            background: linear-gradient(180deg, #1e1e3f 0%, #2d2d5a 100%);
            padding: 15px;
            display: flex;
            flex-direction: column;
            border-left: 2px solid #4a4a8a;
            overflow-y: auto;
        }

        .progress-header {
            text-align: center;
            padding: 10px;
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            border-radius: 12px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
        }

        .progress-header h2 {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .hud-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .hud-stat {
            background: linear-gradient(135deg, #2a2a4a 0%, #3a3a6a 100%);
            padding: 15px 10px;
            border-radius: 10px;
            text-align: center;
        }

        .hud-stat .value {
            font-size: 24px;
            font-weight: bold;
            color: #00d4ff;
        }

        .hud-stat .label {
            font-size: 10px;
            text-transform: uppercase;
            color: #a0a0c0;
            margin-top: 5px;
        }

        .progress-bar-container {
            margin-bottom: 15px;
        }

        .progress-bar-container h3 {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            color: #a0a0c0;
        }

        .progress-bar {
            height: 20px;
            background: #2a2a4a;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #27ae60 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 11px;
            font-weight: 600;
        }

        .status-message {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .status-message.complete {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        .status-message.extra {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
        }

        .data-table-section {
            flex: 1;
            overflow-y: auto;
        }

        .data-table-section h3 {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            color: #a0a0c0;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 10px;
        }

        .data-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 8px 4px;
            text-align: left;
        }

        .data-table td {
            background: #2a2a4a;
            padding: 6px 4px;
            border-bottom: 1px solid #4a4a8a;
            vertical-align: top;
        }

        .data-table tr:nth-child(even) td {
            background: #323252;
        }

        /* Extra Credit Banner */
        .extra-credit-banner {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            margin-top: 15px;
            display: none;
        }

        .extra-credit-banner.visible {
            display: block;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(155, 89, 182, 0.4); }
            50% { box-shadow: 0 0 40px rgba(155, 89, 182, 0.8); }
        }

        .extra-credit-banner h3 {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .extra-credit-banner p {
            font-size: 12px;
            opacity: 0.9;
        }

        /* Final Complete */
        .final-complete {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-top: 15px;
            display: none;
        }

        .final-complete.visible {
            display: block;
        }

        .final-complete h3 {
            font-size: 16px;
            margin-bottom: 10px;
        }

        .final-complete span {
            font-size: 40px;
        }

        /* Results Table Modal */
        .results-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .results-modal.visible {
            display: flex;
        }

        .results-modal-content {
            background: linear-gradient(135deg, #1e1e3f 0%, #2d2d5a 100%);
            padding: 30px;
            border-radius: 20px;
            max-width: 90%;
            max-height: 80%;
            overflow: auto;
            position: relative;
        }

        .results-modal-content h2 {
            margin-bottom: 20px;
            text-align: center;
        }

        .results-full-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .results-full-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 12px 8px;
            text-align: left;
        }

        .results-full-table td {
            background: #2a2a4a;
            padding: 10px 8px;
            border-bottom: 1px solid #4a4a8a;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e74c3c;
            color: #fff;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
        }

        .view-table-btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .view-table-btn:hover {
            transform: scale(1.05);
        }

        .copy-table-btn {
            background: linear-gradient(135deg, #27ae60 0%, #1e8449 100%);
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .copy-table-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
        }

        .copy-table-btn.copied {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- LEFT SIDEBAR -->
        <div class="left-sidebar">
            <div class="sidebar-header">
                <h2>Pick Any Story</h2>
                <div class="count">8 Stories</div>
            </div>

            <div class="scenario-list" id="scenarioList">
                <!-- Scenarios populated by JS -->
            </div>

            <div class="divider"></div>

            <div class="reading-level-section">
                <h3>Reading Level</h3>
                <div class="reading-level-tabs">
                    <button class="level-tab" data-level="low">Low</button>
                    <button class="level-tab active" data-level="medium">Med</button>
                    <button class="level-tab" data-level="high">High</button>
                </div>
            </div>

            <div class="key-words-section">
                <h3>Key Words</h3>
                <div id="keyWords">
                    <span class="key-word">Neuroplasticity</span>
                    <span class="key-word">Neural pathway</span>
                    <span class="key-word">Deliberate practice</span>
                    <span class="key-word">Stretch zone</span>
                    <span class="key-word">Repetition</span>
                    <span class="key-word">Myelin</span>
                </div>
            </div>

            <div class="divider"></div>

            <div class="button-group">
                <button class="btn-reset" onclick="resetSimulation()">Reset</button>
                <button class="btn-new" onclick="newRun()">New Run</button>
            </div>
        </div>

        <!-- CENTER PANEL -->
        <div class="center-panel">
            <div class="step-tabs">
                <div class="step-tab" data-step="1">1. PREDICT</div>
                <div class="step-tab" data-step="2">2. READ</div>
                <div class="step-tab" data-step="3">3. WATCH</div>
                <div class="step-tab" data-step="4">4. RECORD</div>
            </div>

            <div class="main-content">
                <!-- Welcome Screen -->
                <div class="content-card visible" id="welcomeScreen">
                    <div class="welcome-screen">
                        <h1>üß† Brain Science Detective</h1>
                        <p>Scientists say practice changes your brain‚Äîthese 8 people are the evidence.</p>
                        <p>Read real stories and find proof that practice physically changes the brain.</p>
                        <div class="mission-badge">üîç Choose at least 5 stories you like!</div>
                        <p style="margin-top: 20px; font-size: 14px; color: #a0a0c0;">‚Üê Select any story from the left to begin</p>
                    </div>
                </div>

                <!-- Predict Screen -->
                <div class="content-card" id="predictScreen">
                    <div class="predict-content">
                        <h2>üîÆ Make Your Prediction</h2>
                        <div class="predict-question">
                            <p id="predictQuestion">What do you think this person had to practice repeatedly to succeed?</p>
                        </div>
                        <div class="predict-options" id="predictOptions">
                            <div class="predict-option" onclick="selectPrediction(this, 'a')">A specific skill over and over</div>
                            <div class="predict-option" onclick="selectPrediction(this, 'b')">Many different skills at once</div>
                            <div class="predict-option" onclick="selectPrediction(this, 'c')">Nothing‚Äîthey were born talented</div>
                        </div>
                        <div class="action-btn-container">
                            <button class="action-btn" id="predictBtn" disabled onclick="goToRead()">Continue to Read ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- Read Screen -->
                <div class="content-card" id="readScreen">
                    <div class="read-content">
                        <h2>üìñ Read the Story</h2>
                        <div class="reading-card" id="readingText">
                            <!-- Reading content populated by JS -->
                        </div>
                        <button class="read-aloud-btn" onclick="readAloud()">üîä Read Aloud</button>
                        <div class="action-btn-container">
                            <button class="action-btn" onclick="goToWatch()">Watch the Brain Respond ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- Watch Screen -->
                <div class="content-card" id="watchScreen">
                    <div class="watch-content">
                        <h2>üëÅÔ∏è Watch the Pathway Grow</h2>
                        <div class="brain-visual">
                            <div class="brain-outline"></div>
                            <div class="neural-pathway" id="neuralPathway"></div>
                            <div class="pathway-particles" id="particles"></div>
                        </div>
                        <div class="pathway-meter">
                            <div class="meter-label">
                                <span>WEAK</span>
                                <span>Pathway Strength</span>
                                <span>STRONG</span>
                            </div>
                            <div class="meter-bar">
                                <div class="meter-fill" id="meterFill" style="width: 10%;"></div>
                            </div>
                        </div>
                        <div class="action-btn-container">
                            <button class="action-btn" id="watchBtn" disabled onclick="goToRecord()">Record Data ‚Üí</button>
                        </div>
                    </div>
                </div>

                <!-- Record Screen -->
                <div class="content-card" id="recordScreen">
                    <div class="record-content">
                        <h2>‚úÖ Data Recorded!</h2>
                        <div class="completion-badge">
                            <span>üéâ</span>
                        </div>
                        <div class="record-summary" id="recordSummary">
                            <!-- Summary populated by JS -->
                        </div>
                        <div class="action-btn-container">
                            <button class="action-btn" onclick="selectNextScenario()">‚Üê Pick Another Story</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RIGHT SIDEBAR -->
        <div class="right-sidebar">
            <div class="progress-header">
                <h2>Progress</h2>
            </div>

            <div class="hud-grid">
                <div class="hud-stat">
                    <div class="value" id="scoreValue">0</div>
                    <div class="label">Score</div>
                </div>
                <div class="hud-stat">
                    <div class="value" id="streakValue">0</div>
                    <div class="label">Streak</div>
                </div>
                <div class="hud-stat">
                    <div class="value" id="completedValue">0/5</div>
                    <div class="label">Completed</div>
                </div>
                <div class="hud-stat">
                    <div class="value" id="accuracyValue">--%</div>
                    <div class="label">Accuracy</div>
                </div>
            </div>

            <div class="progress-bar-container">
                <h3>Required Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                    <span class="progress-text" id="progressText">0 / 5</span>
                </div>
            </div>

            <div class="status-message" id="statusMessage">Pick any story to start!</div>

            <div class="extra-credit-banner" id="extraCreditBanner">
                <h3>üåü EXTRA CREDIT</h3>
                <p>Required complete! Keep going for extra credit!</p>
            </div>

            <div class="final-complete" id="finalComplete">
                <span>üèÜ</span>
                <h3>ALL 8 COMPLETE!</h3>
                <p>Extra Credit Earned!</p>
            </div>

            <div class="data-table-section">
                <h3>Data Table</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Story</th>
                            <th>Response</th>
                        </tr>
                    </thead>
                    <tbody id="dataTableBody">
                        <!-- Data rows populated by JS -->
                    </tbody>
                </table>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="view-table-btn" onclick="showResultsModal()">View Full Table</button>
                    <button class="copy-table-btn" onclick="copyTableToClipboard()">üìã Copy Table</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="results-modal" id="resultsModal">
        <div class="results-modal-content">
            <button class="close-modal" onclick="closeResultsModal()">√ó</button>
            <h2>üìä Complete Results Table</h2>
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                <p style="color: #a0a0c0; margin: 0;">Copy this data to your worksheet</p>
                <button class="copy-table-btn" onclick="copyTableToClipboard()" style="padding: 8px 16px;">üìã Copy Table</button>
            </div>
            <table class="results-full-table">
                <thead>
                    <tr>
                        <th>Scenario</th>
                        <th>What Happened?</th>
                        <th>Person/Situation Response</th>
                        <th>Connection to Neuroplasticity?</th>
                    </tr>
                </thead>
                <tbody id="resultsTableBody">
                    <!-- Results populated by JS -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Scenario Data
        const scenarios = [
            {
                id: 1,
                name: "Sent to the Hallway",
                emoji: "üìñ",
                person: "Dav Pilkey",
                whatHappened: "ADHD + dyslexia made school hard",
                response: "Drew same characters daily for years",
                connection: "Repetition built a strong drawing neural pathway",
                readings: {
                    low: `Dav Pilkey had <span class="highlight">ADHD</span> and <span class="highlight">dyslexia</span>. School was hard, and teachers sent him to the hallway. In the hallway, he drew the same characters every day. After years of <span class="highlight">repetition</span>, his brain built a strong drawing <span class="highlight">neural pathway</span>‚Äîand he created Captain Underpants.`,
                    medium: `Dav Pilkey had <span class="highlight">ADHD</span> and <span class="highlight">dyslexia</span>, which made reading and sitting still very difficult. Teachers didn't know how to help him, so they sent him to the hallway almost every day. But Dav used that time to draw the same characters over and over. This <span class="highlight">repetition</span> wasn't wasted time‚Äîit was <span class="highlight">deliberate practice</span>. His brain responded by strengthening his drawing <span class="highlight">neural pathway</span>. Later, he turned that practice into books that reached millions of kids.`,
                    high: `Dav Pilkey struggled with <span class="highlight">ADHD</span> and <span class="highlight">dyslexia</span> throughout his childhood. Teachers didn't understand his brain differences, and he spent many school days sitting in the hallway as punishment. But Dav turned that isolation into opportunity. Every day, he drew the same characters‚Äîpracticing lines, expressions, and movements through constant <span class="highlight">repetition</span>. His brain demonstrated <span class="highlight">neuroplasticity</span> by building stronger connections each time he practiced. The <span class="highlight">neural pathway</span> for drawing became so strong that it helped him become a successful author and illustrator. The hallway that was meant as punishment became his training ground for <span class="highlight">deliberate practice</span>.`
                }
            },
            {
                id: 2,
                name: "Words Wouldn't Stick",
                emoji: "üé§",
                person: "Whoopi Goldberg",
                whatHappened: "Dyslexia made reading impossible",
                response: "Memorized scripts by listening repeatedly",
                connection: "Repetition built a strong auditory neural pathway",
                readings: {
                    low: `Whoopi Goldberg had <span class="highlight">dyslexia</span> that no one diagnosed. Reading was so hard that she dropped out of school. But she wanted to act, so she practiced memorizing scripts by listening to them over and over. Her <span class="highlight">repetition</span> built a strong auditory <span class="highlight">neural pathway</span>, and she became an Oscar-winning actress.`,
                    medium: `Whoopi Goldberg grew up with <span class="highlight">dyslexia</span>, but no one knew what it was back then. People often assumed she wasn't smart, and school became frustrating. But Whoopi discovered she could memorize scripts by listening instead of reading. She practiced this skill through constant <span class="highlight">repetition</span>, playing recordings over and over until the words stuck. Her brain showed <span class="highlight">neuroplasticity</span> by building a strong auditory <span class="highlight">neural pathway</span>. She went on to become an award-winning actress and performer.`,
                    high: `Whoopi Goldberg struggled through school with undiagnosed <span class="highlight">dyslexia</span>. Teachers and classmates assumed she wasn't smart because reading was extremely difficult for her. She left school, but she never gave up on her dream of performing. Whoopi discovered that her brain could learn through listening instead of reading. She practiced memorizing scripts by playing them on repeat, using <span class="highlight">repetition</span> to build her skills. This <span class="highlight">deliberate practice</span> triggered <span class="highlight">neuroplasticity</span>‚Äîher brain built a powerful auditory <span class="highlight">neural pathway</span>. Her brain found a different route to success by working in her <span class="highlight">stretch zone</span>.`
                }
            },
            {
                id: 3,
                name: "Not Good Enough",
                emoji: "üèÄ",
                person: "Michael Jordan",
                whatHappened: "Cut from high school varsity team",
                response: "Practiced shooting drills every day",
                connection: "Repetition built powerful basketball neural pathway",
                readings: {
                    low: `Michael Jordan was cut from his high school varsity basketball team. The coach said he wasn't good enough. But Michael practiced shooting drills before and after school every single day. His <span class="highlight">repetition</span> built a powerful basketball <span class="highlight">neural pathway</span>, and he became the greatest player ever.`,
                    medium: `When Michael Jordan tried out for his high school varsity team, the coach cut him from the roster. Michael was devastated‚Äîbasketball was his dream. But instead of giving up, he started practicing shooting drills every morning before school and every afternoon after school. This <span class="highlight">deliberate practice</span> pushed him into his <span class="highlight">stretch zone</span> where real growth happens. Through constant <span class="highlight">repetition</span>, his brain built an incredibly strong basketball <span class="highlight">neural pathway</span>. He went on to win six NBA championships and is considered the greatest basketball player of all time.`,
                    high: `Michael Jordan tried out for his high school varsity basketball team as a sophomore and was cut from the roster. The coach chose another player over him, and Michael went home and cried in his room. But that rejection became fuel for <span class="highlight">deliberate practice</span>. He started arriving at the gym before sunrise and staying after everyone else left, shooting hundreds of baskets every single day. This intense <span class="highlight">repetition</span> put his brain in the <span class="highlight">stretch zone</span>‚Äîthe challenge level where <span class="highlight">neuroplasticity</span> works fastest. His shooting <span class="highlight">neural pathway</span> became so strong that his movements became automatic. He went on to win six NBA championships, five MVP awards, and changed basketball forever. The player who "wasn't good enough" became the greatest because his brain physically changed through practice.`
                }
            },
            {
                id: 4,
                name: "Late Start",
                emoji: "ü§∏",
                person: "Simone Biles",
                whatHappened: "Started gymnastics at age 6‚Äîlate for elite",
                response: "Repeated routines until automatic",
                connection: "Neuroplasticity built powerful movement pathways",
                readings: {
                    low: `Simone Biles grew up in foster care and didn't start gymnastics until age 6. Most elite gymnasts start at age 3. But Simone practiced her routines over and over until they became automatic. Her brain's <span class="highlight">neuroplasticity</span> helped her build powerful movement <span class="highlight">neural pathways</span>, and she became one of the most decorated gymnasts in history.`,
                    medium: `Simone Biles spent her early childhood in foster care, moving between homes. She didn't discover gymnastics until a daycare field trip when she was 6 years old‚Äîlate for a sport where most elites start at age 3. But Simone's brain had powerful <span class="highlight">neuroplasticity</span>. She practiced her routines through constant <span class="highlight">repetition</span>, pushing into her <span class="highlight">stretch zone</span> with increasingly difficult skills. Her movement <span class="highlight">neural pathways</span> became so strong that complex flips became automatic. She is now the most decorated gymnast in world championship history.`,
                    high: `Simone Biles had a difficult early childhood, spending years in foster care before being adopted by her grandparents. She didn't even try gymnastics until a daycare field trip at age 6‚Äîmost elite gymnasts have been training for three years by then. People said she started too late, but Simone's brain proved them wrong through <span class="highlight">neuroplasticity</span>. She practiced every routine through intense <span class="highlight">repetition</span>, breaking down each skill and working on the hardest parts through <span class="highlight">deliberate practice</span>. Her training kept her constantly in the <span class="highlight">stretch zone</span>, where her brain built the strongest connections. The <span class="highlight">neural pathways</span> for her movements became so powerful that she could perform skills no other gymnast had ever landed. She has won more world championship medals than any gymnast in history‚Äîmale or female. Her "late start" brain caught up and surpassed everyone through the science of practice.`
                }
            },
            {
                id: 5,
                name: "Missing a Hand",
                emoji: "‚öæ",
                person: "Jim Abbott",
                whatHappened: "Born without a right hand",
                response: "Practiced glove-switch move thousands of times",
                connection: "Built unique neural pathway through repetition",
                readings: {
                    low: `Jim Abbott was born without a right hand, but he wanted to pitch in Major League Baseball. He invented a special move to switch his glove after each pitch. He practiced this move thousands of times until his brain built a unique <span class="highlight">neural pathway</span>. His <span class="highlight">repetition</span> made the move automatic, and he pitched a no-hitter in the MLB.`,
                    medium: `Jim Abbott was born without a right hand, and people said he could never play baseball. But Jim created his own solution: a special glove-switching move that let him pitch and then instantly catch. He practiced this move thousands of times, using <span class="highlight">deliberate practice</span> on the hardest parts. This <span class="highlight">repetition</span> triggered <span class="highlight">neuroplasticity</span> in his brain, building a <span class="highlight">neural pathway</span> that didn't exist in anyone else. The move became so automatic that he could switch faster than batters could blink. He went on to pitch a no-hitter for the New York Yankees.`,
                    high: `Jim Abbott was born without a right hand, and doctors and coaches said baseball would be impossible. But Jim refused to accept that answer. He invented a completely original glove-switching technique‚Äîbalancing his glove on his right arm while pitching, then snapping it onto his left hand to field. He practiced this move thousands of times in his backyard, using <span class="highlight">deliberate practice</span> to work on the hardest parts. This intense <span class="highlight">repetition</span> pushed his brain into the <span class="highlight">stretch zone</span> where <span class="highlight">neuroplasticity</span> thrives. His brain built a <span class="highlight">neural pathway</span> that was completely unique‚Äîno other human had ever needed this exact skill. The pathway became so strong that his glove switch took less than a second, invisible to batters. He pitched for ten years in the major leagues and threw a no-hitter for the New York Yankees, proving his brain had created something no one thought possible.`
                }
            },
            {
                id: 6,
                name: "Wrong Body Type",
                emoji: "ü©∞",
                person: "Misty Copeland",
                whatHappened: "Started ballet at 13, told body was wrong",
                response: "Practiced ballet positions daily for years",
                connection: "Repetition built strong dance neural pathways",
                readings: {
                    low: `Misty Copeland started ballet at age 13‚Äîvery late for a dancer. Teachers said her body was too muscular and curvy for ballet. But Misty practiced ballet positions every single day for years. Her <span class="highlight">repetition</span> built strong dance <span class="highlight">neural pathways</span>, and she became the first Black female principal dancer at American Ballet Theatre.`,
                    medium: `Misty Copeland didn't take her first ballet class until age 13, when most professional dancers have been training since age 3. Teachers said she started too late and had the "wrong" body type‚Äîtoo muscular and curvy. But Misty used <span class="highlight">deliberate practice</span> to catch up, working on ballet positions for hours every day. This constant <span class="highlight">repetition</span> kept her brain in the <span class="highlight">stretch zone</span> where <span class="highlight">neuroplasticity</span> works fastest. Her dance <span class="highlight">neural pathways</span> became incredibly strong, making difficult moves feel natural. She became the first Black female principal dancer at American Ballet Theatre in the company's 75-year history.`,
                    high: `Misty Copeland grew up in poverty, sharing a motel room with her mother and five siblings. She didn't take her first ballet class until age 13‚Äîa decade later than most professional dancers. Teachers told her she had started too late and that her body was "wrong" for ballet‚Äîtoo muscular, too curvy, too short. But Misty's brain didn't care about those opinions. She practiced ballet positions with intense <span class="highlight">deliberate practice</span>, focusing extra time on her weakest areas. This <span class="highlight">repetition</span> kept her constantly in the <span class="highlight">stretch zone</span>, the challenge level where <span class="highlight">neuroplasticity</span> creates the fastest changes. Her dance <span class="highlight">neural pathways</span> became so strong that she could perform moves that once seemed impossible for her body type. In 2015, she became the first Black female principal dancer at American Ballet Theatre in the company's 75-year history, proving that brains‚Äînot body types‚Äîdetermine what's possible.`
                }
            },
            {
                id: 7,
                name: "Relearning Words",
                emoji: "üß†",
                person: "Gabby Giffords",
                whatHappened: "Gunshot destroyed brain speech area",
                response: "Did speech therapy daily for years",
                connection: "Brain built new pathways around damage",
                readings: {
                    low: `Congresswoman Gabby Giffords was shot in the head, and the bullet destroyed her brain's speech area. Doctors said she might never talk again. But Gabby did speech therapy exercises every single day for years. Her brain's <span class="highlight">neuroplasticity</span> built new <span class="highlight">neural pathways</span> around the damage, and she learned to speak again.`,
                    medium: `In 2011, Congresswoman Gabby Giffords was shot in the head during a public event. The bullet tore through her brain's speech center, and doctors weren't sure if she would ever speak again. But Gabby refused to give up. She did speech therapy exercises through constant <span class="highlight">repetition</span>, practicing sounds and words over and over every day. Her brain demonstrated incredible <span class="highlight">neuroplasticity</span> by building completely new <span class="highlight">neural pathways</span> around the damaged area. Years of <span class="highlight">deliberate practice</span> helped her regain her ability to speak and communicate.`,
                    high: `On January 8, 2011, Congresswoman Gabby Giffords was shot in the head at a public event in Arizona. The bullet passed through the left side of her brain, destroying much of her speech center. Doctors weren't sure if she would survive, let alone speak again. But Gabby's brain had <span class="highlight">neuroplasticity</span>‚Äîthe ability to rewire itself. She began speech therapy immediately, practicing sounds and words through endless <span class="highlight">repetition</span>. Each therapy session pushed her into the <span class="highlight">stretch zone</span>, forcing her brain to find new routes for language. Over years of <span class="highlight">deliberate practice</span>, her brain built entirely new <span class="highlight">neural pathways</span> that bypassed the damaged area. Today, Gabby speaks publicly about gun violence and brain recovery, living proof that the brain can rebuild itself when we practice.`
                }
            },
            {
                id: 8,
                name: "Can't Hear Music",
                emoji: "üé∏",
                person: "Evelyn Glennie",
                whatHappened: "Became profoundly deaf by age 12",
                response: "Practiced feeling vibrations for hours daily",
                connection: "Brain rewired touch pathways for music",
                readings: {
                    low: `Evelyn Glennie became profoundly deaf by age 12, but she wanted to be a musician. She practiced feeling music vibrations through her body for hours every day. Her brain's <span class="highlight">neuroplasticity</span> rewired her touch pathways to process music. She became a world-famous percussionist who "hears" through feeling.`,
                    medium: `Evelyn Glennie began losing her hearing at age 8 and was profoundly deaf by age 12. Teachers said she should give up music and learn sign language instead. But Evelyn refused. She practiced feeling vibrations through her hands, feet, and body for hours every day. This <span class="highlight">repetition</span> triggered <span class="highlight">neuroplasticity</span>‚Äîher brain rewired her touch <span class="highlight">neural pathways</span> to process musical information. She became a Grammy-winning percussionist who performs barefoot so she can feel the music through the floor.`,
                    high: `Evelyn Glennie started losing her hearing at age 8 due to nerve damage, and by age 12, she was profoundly deaf. Her school's music teachers told her to give up‚Äîhow could a deaf person become a musician? But Evelyn discovered she could feel music through vibrations in her body. She practiced for hours every day, learning to detect pitch, rhythm, and tone through her hands, feet, and even her cheekbones. This intense <span class="highlight">repetition</span> put her brain in the <span class="highlight">stretch zone</span>, triggering remarkable <span class="highlight">neuroplasticity</span>. Her brain rewired her touch <span class="highlight">neural pathways</span> to do the job that hearing pathways could no longer do. The skill became so strong that she now performs as one of the world's premier percussionists, playing barefoot to feel vibrations through the stage floor. Her brain proves that <span class="highlight">deliberate practice</span> can create abilities that seem impossible.`
                }
            }
        ];

        // State
        let state = {
            currentScenario: null,
            currentStep: 0,
            readingLevel: 'medium',
            completedScenarios: [],
            score: 0,
            streak: 0,
            predictions: {},
            resultsData: []
        };

        // Initialize
        function init() {
            renderScenarios();
            setupReadingLevelTabs();
        }

        function renderScenarios() {
            const list = document.getElementById('scenarioList');
            list.innerHTML = scenarios.map(s => `
                <div class="scenario-card ${state.completedScenarios.includes(s.id) ? 'completed' : ''}" 
                     data-id="${s.id}" onclick="selectScenario(${s.id})">
                    <span class="scenario-emoji">${s.emoji}</span>
                    <span class="scenario-name">${s.name}</span>
                </div>
            `).join('');
        }

        function setupReadingLevelTabs() {
            document.querySelectorAll('.level-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.level-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    state.readingLevel = tab.dataset.level;
                    if (state.currentScenario && state.currentStep === 2) {
                        updateReadingText();
                    }
                });
            });
        }

        function selectScenario(id) {
            if (state.completedScenarios.includes(id)) return;
            
            state.currentScenario = scenarios.find(s => s.id === id);
            state.currentStep = 1;
            
            // Update UI
            document.querySelectorAll('.scenario-card').forEach(card => {
                card.classList.remove('selected');
                if (parseInt(card.dataset.id) === id) {
                    card.classList.add('selected');
                }
            });
            
            // Reset prediction selection
            document.querySelectorAll('.predict-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.getElementById('predictBtn').disabled = true;
            
            updateStepTabs();
            showScreen('predictScreen');
        }

        function updateStepTabs() {
            document.querySelectorAll('.step-tab').forEach((tab, i) => {
                tab.classList.remove('active', 'completed');
                if (i + 1 === state.currentStep) {
                    tab.classList.add('active');
                } else if (i + 1 < state.currentStep) {
                    tab.classList.add('completed');
                }
            });
        }

        function showScreen(screenId) {
            document.querySelectorAll('.content-card').forEach(card => {
                card.classList.remove('visible');
            });
            document.getElementById(screenId).classList.add('visible');
        }

        function selectPrediction(el, choice) {
            document.querySelectorAll('.predict-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            el.classList.add('selected');
            state.predictions[state.currentScenario.id] = choice;
            document.getElementById('predictBtn').disabled = false;
        }

        function goToRead() {
            state.currentStep = 2;
            updateStepTabs();
            updateReadingText();
            showScreen('readScreen');
        }

        function updateReadingText() {
            const text = state.currentScenario.readings[state.readingLevel];
            document.getElementById('readingText').innerHTML = text;
        }

        function readAloud() {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel();
                const text = document.getElementById('readingText').innerText;
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.rate = 0.9;
                speechSynthesis.speak(utterance);
            }
        }

        function goToWatch() {
            state.currentStep = 3;
            updateStepTabs();
            showScreen('watchScreen');
            
            // Reset animation state
            const pathway = document.getElementById('neuralPathway');
            const meter = document.getElementById('meterFill');
            const watchBtn = document.getElementById('watchBtn');
            
            pathway.classList.remove('growing');
            meter.style.width = '10%';
            watchBtn.disabled = true;
            
            // Create particles
            createParticles();
            
            setTimeout(() => {
                pathway.classList.add('growing');
                animateMeter();
            }, 500);
            
            setTimeout(() => {
                watchBtn.disabled = false;
            }, 2500);
        }

        function createParticles() {
            const container = document.getElementById('particles');
            container.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = (30 + Math.random() * 40) + '%';
                particle.style.top = (40 + Math.random() * 20) + '%';
                particle.style.animationDelay = (Math.random() * 2) + 's';
                container.appendChild(particle);
            }
        }

        function animateMeter() {
            const meter = document.getElementById('meterFill');
            let width = 10;
            const interval = setInterval(() => {
                width += 2;
                meter.style.width = width + '%';
                if (width >= 90) clearInterval(interval);
            }, 50);
        }

        function goToRecord() {
            state.currentStep = 4;
            updateStepTabs();
            
            // Record data
            const scenario = state.currentScenario;
            const isCorrect = state.predictions[scenario.id] === 'a';
            
            if (isCorrect) {
                state.score += 100;
                state.streak++;
            } else {
                state.streak = 0;
            }
            
            state.completedScenarios.push(scenario.id);
            state.resultsData.push({
                scenario: scenario.name,
                whatHappened: scenario.whatHappened,
                response: scenario.response,
                connection: scenario.connection
            });
            
            // Update summary
            document.getElementById('recordSummary').innerHTML = `
                <p><strong>Story:</strong> ${scenario.name} (${scenario.person})</p>
                <p><strong>What Happened:</strong> ${scenario.whatHappened}</p>
                <p><strong>Response:</strong> ${scenario.response}</p>
                <p><strong>Connection:</strong> ${scenario.connection}</p>
            `;
            
            updateProgress();
            renderScenarios();
            updateDataTable();
            showScreen('recordScreen');
        }

        function updateProgress() {
            const completed = state.completedScenarios.length;
            const required = 5;
            
            document.getElementById('scoreValue').textContent = state.score;
            document.getElementById('streakValue').textContent = state.streak;
            document.getElementById('completedValue').textContent = `${completed}/${required}`;
            
            const correctCount = state.completedScenarios.filter(id => 
                state.predictions[id] === 'a'
            ).length;
            const accuracy = completed > 0 ? Math.round((correctCount / completed) * 100) : 0;
            document.getElementById('accuracyValue').textContent = accuracy + '%';
            
            const progressPercent = Math.min((completed / required) * 100, 100);
            document.getElementById('progressFill').style.width = progressPercent + '%';
            document.getElementById('progressText').textContent = `${completed} / ${required}`;
            
            // Update status message
            const statusMsg = document.getElementById('statusMessage');
            const extraBanner = document.getElementById('extraCreditBanner');
            const finalComplete = document.getElementById('finalComplete');
            
            if (completed < required) {
                statusMsg.textContent = `Pick ${required - completed} more you like!`;
                statusMsg.className = 'status-message';
            } else if (completed === required) {
                statusMsg.textContent = 'Required Complete!';
                statusMsg.className = 'status-message complete';
                extraBanner.classList.add('visible');
            } else if (completed < 8) {
                statusMsg.textContent = `${8 - completed} more for full extra credit!`;
                statusMsg.className = 'status-message extra';
            } else {
                statusMsg.textContent = 'ALL COMPLETE!';
                statusMsg.className = 'status-message complete';
                extraBanner.classList.remove('visible');
                finalComplete.classList.add('visible');
            }
        }

        function updateDataTable() {
            const tbody = document.getElementById('dataTableBody');
            tbody.innerHTML = state.resultsData.map(r => `
                <tr>
                    <td>${r.scenario}</td>
                    <td>${r.response}</td>
                </tr>
            `).join('');
        }

        function selectNextScenario() {
            state.currentScenario = null;
            state.currentStep = 0;
            
            document.querySelectorAll('.scenario-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            document.querySelectorAll('.step-tab').forEach(tab => {
                tab.classList.remove('active', 'completed');
            });
            
            showScreen('welcomeScreen');
        }

        function showResultsModal() {
            const tbody = document.getElementById('resultsTableBody');
            tbody.innerHTML = state.resultsData.map(r => `
                <tr>
                    <td>${r.scenario}</td>
                    <td>${r.whatHappened}</td>
                    <td>${r.response}</td>
                    <td>${r.connection}</td>
                </tr>
            `).join('');
            document.getElementById('resultsModal').classList.add('visible');
        }

        function closeResultsModal() {
            document.getElementById('resultsModal').classList.remove('visible');
        }

        function copyTableToClipboard() {
            if (state.resultsData.length === 0) {
                alert('No data to copy yet! Complete at least one story first.');
                return;
            }
            
            // Build tab-separated text for clipboard
            let text = 'Scenario\tWhat Happened?\tPerson/Situation Response\tConnection to Neuroplasticity?\n';
            state.resultsData.forEach(r => {
                text += `${r.scenario}\t${r.whatHappened}\t${r.response}\t${r.connection}\n`;
            });
            
            // Copy to clipboard
            navigator.clipboard.writeText(text).then(() => {
                // Show visual feedback
                const buttons = document.querySelectorAll('.copy-table-btn');
                buttons.forEach(btn => {
                    const originalText = btn.textContent;
                    btn.textContent = '‚úÖ Copied!';
                    btn.classList.add('copied');
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.classList.remove('copied');
                    }, 2000);
                });
            }).catch(err => {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                
                const buttons = document.querySelectorAll('.copy-table-btn');
                buttons.forEach(btn => {
                    const originalText = btn.textContent;
                    btn.textContent = '‚úÖ Copied!';
                    btn.classList.add('copied');
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.classList.remove('copied');
                    }, 2000);
                });
            });
        }

        function resetSimulation() {
            state = {
                currentScenario: null,
                currentStep: 0,
                readingLevel: 'medium',
                completedScenarios: [],
                score: 0,
                streak: 0,
                predictions: {},
                resultsData: []
            };
            
            document.getElementById('extraCreditBanner').classList.remove('visible');
            document.getElementById('finalComplete').classList.remove('visible');
            
            renderScenarios();
            updateProgress();
            updateDataTable();
            selectNextScenario();
        }

        function newRun() {
            resetSimulation();
        }

        // Initialize on load
        init();
    </script>
</body>
</html>
